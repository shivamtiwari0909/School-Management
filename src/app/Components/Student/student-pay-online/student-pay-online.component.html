<div class="main-wrapper">
    <app-student-header></app-student-header>
    <style>
        @-webkit-keyframes blinker {
  from {opacity: 1.0;}
  to {opacity: 0.0;}
}
.blink{
	text-decoration: blink;
	-webkit-animation-name: blinker;
	-webkit-animation-duration: 0.6s;
	-webkit-animation-iteration-count:infinite;
	-webkit-animation-timing-function:ease-in-out;
	-webkit-animation-direction: alternate;
}
    </style>
        <div class="page-wrapper">
            <div class="content container-fluid">
                <div class="row">
                    <!--  page header -->
                    <div class="col-lg-12">
                        <h1 class="page-header">Payfee List</h1>
                    </div>
                    <!-- end  page header -->
                </div>
                <div class="row">
                    <div class="col-lg-121">
                        <div class="panel panel-default">
                            <div class="panel-heading">
                                <span>Fee Pay Status</span>
                                <a href="/fees-history" class="btn btn-primary">Fee History </a>
                            </div>
                            <div class="panel-body">
                                <table>
                                    <tr>
                                        <td style="background-color: white;padding: 10px;">
                                            <h4 style="margin-top: -432px;" class="text-center"><b>
                                                <br>
                                                Payment by Bank Transfer</b></h4>
                                            <div class="table-responsive" style="height: 140px;">
                                                <table class="table no-margin table-bordered">
                                                    <tr>
                                                        <th><b>Name on Account</b></th>
                                                        <td>Infoniti Group </td>
                                                    </tr>
                                                    <tr>
                                                        <th><b>Bank Name</b></th>
                                                        <td>State bank of india </td>
                                                    </tr>
                                                    <tr>
                                                        <th><b>Account Number</b></th>
                                                        <td>xxxx xxxx xxxx </td>
                                                    </tr>
                                                    <tr>
                                                        <th><b>IFSC Code</b></th>
                                                        <td>SBIN0000174</td>
                                                    </tr>
                                                    <tr>
                                                        <th><b>Branch and Address</b></th>
                                                        <td>Samastipur </td>
                                                    </tr>
                                                </table>
                                            </div>
                                            <hr>
                                            <br>
                                            <b class="text-danger text-center blink">Note:- In case of payment by bank transfer , kindly
                                            upload
                                            your payment slip. </b>
                                            <br>
                                            <br>
                                            <form enctype="multipart/form-data" action="" class="form-horizontal" method="post"
                                                autocomplete="off">
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <input required type="number" class="form-control" name="payment_amount"
                                                            placeholder="Amount" id="payment_amount">
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <textarea required class="form-control payment_comment" name="payment_comment"
                                                            placeholder="Any Message For Us ! Mention the month of payment"></textarea>
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-12 text-danger">
                                                        Payment Slip :
                                                        <input required type="file" name="payment_slip" class="image_upload"
                                                            id="payment_slip" />
                                                        <img class="preview" width="100px" src="#" alt="" />
                                                    </div>
                                                </div>
                                                <div class="form-group">
                                                    <div class="col-md-12">
                                                        <input type="submit" name="payment_slip" value="Upload Payment Slip"
                                                            class="width100 btn btn-primary" id="payment_slip" style="width: 100%;">
                                                    </div>
                                                </div>
                                            </form>
                                        </td>
                                        <td>
                                            <div class="table-responsive" style="background-color: white;border: 1px solid #f2f2f2;margin-bottom: 20px;">
                                                <table class="table table-striped table-bordered table-hover" id="listadded">
                                                    <thead>
                                                        <tr>
                                                            <th>Month</th>
                                                            <th>Rs.</th>
                                                            <th>Dues</th>
                                                            <th>Total</th>
                                                            <th>#</th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important"> 
                                                                Apr
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 3180
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important">  
                                                                May
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important"> 
                                                                June
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important"> 
                                                                July
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important">  
                                                                Aug
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1250
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important"> 
                                                                Sep
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459">
                                                            <td style="color:#e84646 !important">  
                                                                Oct
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>

                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                -
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459" style="background-color: #FFC0CB;">
                                                            <td style="color:#e84646 !important"> 
                                                                Nov
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 0
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                <input _ngcontent-ng-c2174508341="" type="checkbox" data-mid="11" data-mname="Nov" onchange="update_fee(11);" value="1550" class="check_month text-right" style="float: right;">
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459" style="background-color: #FFC0CB;">
                                                            <td style="color:#e84646 !important"> 
                                                                Dec
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1250
                                                            </td>
                                                            <td>
                                                                <input _ngcontent-ng-c2174508341="" type="checkbox" data-mid="11" data-mname="Nov" onchange="update_fee(11);" value="1550" class="check_month text-right" style="float: right;">
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459" style="background-color: #FFC0CB;">
                                                            <td style="color:#e84646 !important"> 
                                                                Jan
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                <input _ngcontent-ng-c2174508341="" type="checkbox" data-mid="11" data-mname="Nov" onchange="update_fee(11);" value="1550" class="check_month text-right" style="float: right;">
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459" style="background-color: #FFC0CB;">
                                                            <td style="color:#e84646 !important"> 
                                                                Feb
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                <input _ngcontent-ng-c2174508341="" type="checkbox" data-mid="11" data-mname="Nov" onchange="update_fee(11);" value="1550" class="check_month text-right" style="float: right;">
                                                            </td>
                                                        </tr>
                                                        <tr class="gradeU listing use459" style="background-color: #FFC0CB;">
                                                            <td style="color:#e84646 !important"> 
                                                                Mar
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 500
                                                            </td>
                                                            <td>
                                                            </td>
                                                            <td>
                                                                <i class="fa fa-rupee-sign"></i> 1050
                                                            </td>
                                                            <td>
                                                                <input _ngcontent-ng-c2174508341="" type="checkbox" data-mid="11" data-mname="Nov" onchange="update_fee(11);" value="1550" class="check_month text-right" style="float: right;">
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                            <div class="table-responsive" style="background-color: white;border: 1px solid #f2f2f2;margin-bottom: 20px;">
                                                <table class="table table-striped table-bordered table-hover" id="listadded">
                                                    <thead>
                                                        <tr>
                                                            <th colspan="3"><b>Online Payment details</b></th>
                                                        </tr>
                                                    </thead>
                                                    <tbody>
                                                        <tr style="background-color: white;">
                                                            <td colspan="3"> 
                                                                <textarea required="" class="form-control payment_comment"
                                                                    name="payment_comment" placeholder="Any Message For Us ?"></textarea>
                                                            </td>
                                                        </tr>
                                                        <tr>
                                                            <td>
                                                                <label>Total Fee</label>
                                                                <br>
                                                                <input onkeyup="custom_payment()" type="number" min="0"
                                                                    class="form-control" id="monthly_amt" name="monthly_amt" value="">
                                                            </td>
                                                            <td>
                                                                <!-- <label>Last Dues</label>
                                                                <br>
                                                                <input type="number" min="0" class="form-control" id="last_dues"
                                                                    name="last_dues" value="0"> -->
                                                                    <label>Late Fine</label>
                                                                <br>
                                                                <input readonly type="number" min="0" class="form-control"
                                                                    name="nextfeeamt" id="late_fine" value="0">
                                                            </td>
                                                            <td>
                                                                <label>Tax Amount</label>
                                                                    <br>
                                                                    <input readonly type="number" min="0" class="form-control"
                                                                        name="taxamount" id="taxamount" value="">
                                                            </td>
                                                        </tr>
                                                        <tr style="background-color: white;">
                                                            <td colspan="3"> 
                                                                <button onclick="return online_payment()" type="submit" style="width: 100%;"
                                                                name="add_fees" class="text center btn btn-primary">
                                                                <span style="font-size: 1.2em">Online Payment (<i class="fa fa-inr"></i>
                                                                    <span id="paynowamt">0</span>)</span><br>
                                                                <span class="small"
                                                                    id="monthsof">(Please VERIFY all details <i
                                                                        class="fa fa-6 fa-arrow-circle-up"></i>)</span></button>
                                                            </td>
                                                        </tr>
                                                    </tbody>
                                                </table>
                                            </div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <script>
            $(function () {
                //$('.popover').popover();
            })
            $(function () {
                // Enables popover
                $(".popover1").popover({
                    html: true,
                    sanitize: false,
                });
            });

            var last_dues = parseInt($("#last_dues").val());
            last_dues = isNaN(last_dues) ? 0 : last_dues
            var late_fine = parseInt($("#late_fine").val());
            late_fine = isNaN(late_fine) ? 0 : late_fine
            var clientID = 82;
            var extra_tax = 0;
            var fix_tax = 0;
            var class_late_fine = 0;
            var tax_perc = 0;
            var is_online = 1;
            var total_payment = last_dues + late_fine;
            var total_tax = (total_payment * tax_perc) + fix_tax;
            total_payment = total_payment + total_tax;
            $("#paynowamt").text(total_payment);
            $("#taxamount").val(total_tax);
            //alert(late_fine);
            let monthname;
            let month;

            function online_payment() {
                if (!total_payment) {
                    alert("Select Month!");
                    return false;
                }
                var actual_payment = $("#monthly_amt").val();
                if (is_online) {
                    window.location = base_path + "studentfeepayment/payment/" + month + '/' + actual_payment;
                } else {
                    alert("Your Institution have not config Online payment yet !");
                }
                return false;
            }

            function custom_payment() {
                var actual_payment = $("#monthly_amt").val();
                $("#paynowamt").text(actual_payment);
                $("#monthsof").text("For Months " + actual_payment);
            }

            function update_fee(current = 0) {
                //$("#taxamount").html();
                monthname = "";
                month = "";
                var count = $(".check_month:checked").length;
                var counttransport = $(".check_monthtrans:checked").length;
                let transport_val = 0;
                var amount = 0;
                $(".check_month:checked").each(function () {
                    amount = amount + parseInt($(this).val());
                    monthname = monthname + ' | ' + $(this).attr("data-mname");
                    month = month + '-' + $(this).attr("data-mid");
                });

                var fee_and_classfine = amount + parseFloat(class_late_fine);
                total_payment = parseFloat(fee_and_classfine) + parseFloat(late_fine) + parseFloat(last_dues);

                $("#monthly_amt").val(fee_and_classfine);
                $("#payment_amount").val(fee_and_classfine);

                total_tax = (total_payment * tax_perc) + fix_tax;
                total_payment = total_payment + total_tax;

                $("#taxamount").val(total_tax);
                $("#paynowamt").text(total_payment);
                $("#monthsof").text("For Months " + monthname);
                $(".payment_comment").val("For Months " + monthname);

            }
            $(".image_upload").change(function () {
                preview_image(this);
            });
        </script>
    <app-student-footer></app-student-footer>
</div>